<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard</title>
</head>
<body>

<h2>Welcome <span id="name"></span></h2>
<h3>Balance: <span id="balance">0</span> SC</h3>

<button id="logout">Logout</button>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { 
    getAuth, 
    onAuthStateChanged, 
    signOut 
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { 
    getFirestore, 
    doc, 
    getDoc 
  } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDjEgk5EHgQD5HQJxEvHOzFwVyr9ZLEZBY",
    authDomain: "verifyprojectss.firebaseapp.com",
    projectId: "verifyprojectss",
    appId: "1:979191477358:web:2f5176ea9174579118a27f"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  onAuthStateChanged(auth, async (user) => {
    if (!user) {
      window.location.href = "index.html";
      return;
    }

    document.getElementById("name").innerText = user.displayName;

    const snap = await getDoc(doc(db, "users", user.uid));
    if (snap.exists()) {
      document.getElementById("balance").innerText = snap.data().balance;
    }
  });

  document.getElementById("logout").onclick = () => signOut(auth);
</script>

</body>
</html>
